/** ======= Background login ======= **/
$("#login").click(function() {
	var username = $.trim($("#username").val());
	var password = $.trim($("#password").val());
	if(username == "" || password == "") {
		return alert("每一项都不可以为空!");
	} else {
		$.post("index.php", {"mod": "admin", "action": "login", "username": username, "password": password}, function(result){
			result = strToJson(result);
			if(result.code == 1) {
				alert("登录成功");
				return history.go(0);
			}
			return alert("账号或密码不正确!");
		});
	}
});

/** ======= Conversion JSON ======= **/
function strToJson(str){ 
	var json = eval('(' + str + ')'); 
	return json;
}

/** ======= Change background image ======= **/
function setBackGroUnd(id) {
	var num = Math.floor(Math.random() * 5);
	return $("#" + id).css("backgroundImage","url(/View/speblog/img/bj-" + num + ".jpg)");
}

/** ======= Modify system information ======= **/
$("#setSystem").click(function(){
	var sitename = $.trim($("#sitename").val());
	var keywords = $.trim($("#keywords").val());
	var description = $.trim($("#description").val());
	$.post("index.php", {"mod": "admin", "action": "setSystem", "sitename": sitename, "keywords": keywords, "description": description}, function(result){
		result = strToJson(result);
		if(result.code == 1) {
			return alert("修改成功");
		}
		return alert("修改失败!");
	});
});

/** ======= Modify Menu ======= **/
$("#setMenu").click(function(){
	var menuhtm = $.trim($("#menu_htm").val());
	$.post("index.php", {"mod": "admin", "action": "setMenu", "menuhtm": menuhtm}, function(result){
		result = strToJson(result);
		if(result.code == 1) {
			return alert("修改成功");
		}
		return alert("修改失败!");
	});
});

/** ======= Modify Links ======= **/
$("#setLinks").click(function(){
	var linkshtm = $.trim($("#links_htm").val());
	$.post("index.php", {"mod": "admin", "action": "setLinks", "linkshtm": linkshtm}, function(result){
		result = strToJson(result);
		if(result.code == 1) {
			return alert("修改成功");
		}
		return alert("修改失败!");
	});
});